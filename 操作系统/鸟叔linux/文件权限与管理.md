### 文件权限

#### 使用者与群组
* 文件拥有者(uear)
类似于一个家庭中的个人的房间
* 群组(group)
类似与一个家庭中的客厅
* 其他人(other)
类似与客人

###### 使用者的意义
由于王家三人各自拥有自己的房间，所以，王二毛虽然可以进入王三毛的房间，但是二毛不能翻三毛的抽屉。因为抽屉里面可能有三毛的私人的东西。

###### 群组的概念
由于共同拥有客厅，所以王家三兄弟可以在客厅打开电视机，翻阅报纸等等。反正，只要是在客厅的玩意，三兄弟可以使用，因为大家都是一家人。

###### 其他人的概念
如果张小猪通过关系认识了三毛，并且跟王三毛成为好朋友，那么张小猪就可以通过三毛进入王家，那个张小猪就是所谓的“其他人”


#### Linux文件权限概念

###### 修改文件属性与权限

* 改变所属群组

>chgrp [-R] dirname/filename

>选项与参数:
>-R:进行递归的持续变更，当要改变一个目录下所有文件的群组时要使用该参数

```shell
chgrp user initial-setup-ks.cfg# 将该文件群组改为user
```
* 改变文件拥有者

> chown [-R] 账号名称 文件或目录

* 改变权限

> chmod [-R] xyz 文件或目录
> 选项与参数:
> xyz:就是要修改的数字类型的权限属性

```shell
每种身份各自的三个权限分数是需要累加的，例如当权限为[-rwxrwx---]分数则是:
owner=rwx=4+2+1=7
group=rwx=4+2+1=7
others=---=0+0+0=0

chmod 777 .bashrc #将该文件的权限改为rwxrwxrwx
```

>常常我们以vim编辑一个shell的文字批处理文件后，他的权限通常是-rw-rw-r--也就是644，如果要将该文件变成可执行文件，并且不要其他人修改此文件的话，那么就需要-rwxr-xr-x这样的权限，此时就得下达:"chmod 755 test.sh"的指令

###### 目录与文件的权限意义

| 元件 | 内容| r | w | x |
| ---- | ---- | ---- | ---- | ---- |
| 文件 | 详细数据 | 读到文件内容 | 修改文件内容 | 执行文件内容 | 
| 文件夹| 文件名 | 读到文件名 | 修改文件名 | 进入该目录的权限 | 



>**注意：一个文件有w权限不代表具有删除该文件的权限，只有当该文件所属的目录有w属性才可以删除该文件**
**所以目录具有w属性不仅代表可以修改其中的文件名，还代表可以删除里面的文件！**
**对于目录，若没有x属性，则不能进入该目录下！**

#### 目录的相关操作

```shell
cd:变换目录
pwd:显示当前的目录
mkdir:创建一个新的目录
rmdir:删除一个空的目录
```

###### 创建文件夹:mkdir

> mkdir [-mp] 目录名称

> 选项与参数:

> -m:设置文件的权限。直接设置，不需要看默认权限(umask)

> -p:帮助你直接将所需要的目录（包含上层目录）递回创建起来!


```shell
mkdir test   <==创建一个名为test的新目录
mkdir -p test1/test2/test3/test4 <==加了-p的选项，可以自行创建多层目录，这里的test1,test2,test3都会创建
mkdir -m 711 test2<==创建权限为rwx--x--x的目录
```

###### 删除文件夹:rmdir

> rmdir [-p]目录名称

> 选项与参数:

> -p:连同“上层”“空的”目录也一起删除

```shell
rmdir test <==直接删除空目录，但是不能删除还有内容的目录
rmdir -p test1/test2/test3/test4 <==利用-p选项立刻就可以将test1,test2,test3这些空目录一次删除
```
>注意：使用rm -r dirname/filename 将非空目录与文件删除

###### 文件与目录的检视:ls

>ls [-adl] 文件名或目录名称

>选项与参数:

>-a:全部的文件，连通隐藏文件(开头为.的文件)一起列出来

>-d:仅列出目录本身，而不是列出目录内的文件数据

>-l:将文件的详细信息全部输出，包含文件的属性与权限等数据

###### 文件复制

> cp [-ipr] 来源文件(source) 目标文件(destination)

> 选项与参数

> -i:若目标文件已经存在时，在覆盖时会先询问动作的进行

> -p:连同文件的属性(权限，用户，时间)一起复制过去，而非使用默认属性

> -r:递回持续复制，用于目录的复制行为

###### 文件删除

>rm [-rfi] 文件或目录

>选项与参数:

>-f:就是force的意思，忽略不存在的文件，不会出现警告讯息

>-i：互动模式，在删除前会询问使用者是否继续执行

>-r:递回删除，最常用在目录的删除了，这是非常危险的选项

###### 文件(夹)移动

> mv [-fiu] source destination

> 选项与参数:

> -f:force强制的意思，如果目标文件已经存在，不会询问而直接覆盖

> -i:若目标文件已经存在时，就会询问是否覆盖

> -u:若目标文件已经存在，且source比较新，才会更新

```shell
#j将目录名称更改为mvtest2
mv mvtes1 mvtest2<==其实在Linux下面还有一个指令rename专门用于文件的改名

#创建两个文件，再全部移动到/tmp/mvtest2当中
cp ~/.bashrc bashrc1
cp ~/.bashrc bashrc2
mv bashrc1 bashrc2 mvtest2   <==同时移动两个文件，如果有多个来源文件或目录，则最后一个目标文件一定是"目录"!
```
###### 取得文件名与目录名:basename,dirname

```shell
basename /etc/sysconfig/network  <===输出`network`

dirname /etc/sysconfig/network   <===输出`etc/sysconfig`
```

#### 文件内容相关操作

* cat:由第一行开始显示文件内容
* tac：从最后一行开始显示，可以看出tac是cata的倒着写!
* more:一页一页的显示文件内容
* less:与more类似，但是比more更好的是，他可以往前翻页
* head:只看头几行
* tail:只看尾巴几行
* od:以二进制的方式读取文件内容!
* touch:创建一个空文件

>head [-n] filename

> 选项与参数:

> -n:打印出行号，连通空白行也会有行号

> head [-n number] 文件

> 选项与参数

> -n:后面接数字，代表显示几行的意思

```shell
#默认的情况下，显示前面十行，若要显示前20行，就得要这样:
head -n 20 /etc/man_db.conf
#如果后面100行的数据都不打印，只打印/etc/man_db.conf的前面几行
head -n -100 /etc/man_db.conf <==不打印后面100行数据
```

###### 文件的默认权限:umask


 ```shell
umask  <===输出`0022`这代表默认权限为`022`
umask 002 <==修改默认权限值
```

#### 指令与文件搜索

###### 指令文件名的搜寻: which

> which  command

```shell
#搜寻ifconfig这个指令的完整文件名
which ifconfig
#搜寻hsitory这个指令的完整文件名
which history
```

###### 文件名的搜寻：whereis，find

> whereis 文件或目录名

```shell
#请找出ifconfig这个文件名
whereis ifconfig
```

> find 查找文件

```shell
#搜寻/home下面属于 dmtsai的文件
find /home -user dmtsai  《==利用这个指令将属于某个使用者的所有文件都找出来喔
# 找出文件名为passwd这个文件
find / -name passwd
#找出文件名包含了passwd这个关键字的文件
find / -name "passwd"
```

###### 权限与指令间的关系

执行`cp /dir1/file1 /dir2`的操作时，各文件夹所需的最小权限如下:

* dir1:至少需要有x权限
* file1:至少需要有r权限 
* dir2:至少需要有x和w权限








